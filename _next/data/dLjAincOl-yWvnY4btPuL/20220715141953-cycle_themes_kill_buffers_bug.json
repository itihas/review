{"pageProps":{"title":"=cycle-themes= kill buffers bug","hast":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"description"},"children":[{"type":"text","value":"description"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When running "},{"type":"element","tagName":"a","properties":{"href":"/~/dotfiles/.emacs::defun%20cycle-themes%20(%CF%86n"},"children":[{"type":"text","value":"cycle-themes"}]},{"type":"text","value":", I'd get prompted:\n"}]},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The current server still has clients; delete them?\n"}]}]},{"type":"element","tagName":"h1","properties":{"id":"what-it-ended-up-being"},"children":[{"type":"text","value":"what it ended up being"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"/nix/store/2hqgz9qa19qwfgz0qk3kna3qlqxwjkyz-emacs-27.2/share/emacs/27.2/lisp/custom.el.gz::defun%20enable-theme%20(theme"},"children":[{"type":"element","tagName":"code","properties":{"className":["inline-verbatim"]},"children":[{"type":"text","value":"enable-theme"}]}]},{"type":"text","value":" makes a call to "},{"type":"element","tagName":"a","properties":{"href":"/nix/store/2hqgz9qa19qwfgz0qk3kna3qlqxwjkyz-emacs-27.2/share/emacs/27.2/lisp/custom.el.gz::defun%20custom-theme-recalc-variable%20(variable"},"children":[{"type":"element","tagName":"code","properties":{"className":["inline-verbatim"]},"children":[{"type":"text","value":"custom-theme-recalc-variable"}]}]},{"type":"text","value":" , which in turn runs:\n"}]},{"type":"element","tagName":"pre","properties":{"className":["src-block"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-elisp"]},"children":[{"type":"text","value":"(funcall (or (get variable 'custom-set) #'set-default) variable\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Some of the variables in question are also minor modes, among them "},{"type":"element","tagName":"a","properties":{"href":"/nix/store/2hqgz9qa19qwfgz0qk3kna3qlqxwjkyz-emacs-27.2/share/emacs/27.2/lisp/server.el.gz::(define-minor-mode%20server-mode"},"children":[{"type":"element","tagName":"code","properties":{"className":["inline-verbatim"]},"children":[{"type":"text","value":"server-mode"}]}]},{"type":"text","value":". Which for some reason was set to "},{"type":"element","tagName":"code","properties":{"className":["inline-verbatim"]},"children":[{"type":"text","value":"t"}]},{"type":"text","value":" in Custom?\n"}]},{"type":"element","tagName":"h1","properties":{"id":"fixed-it-by"},"children":[{"type":"text","value":"fixed it by"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"removing that from custom. we were fine then.\n"}]},{"type":"element","tagName":"h1","properties":{"id":"things-i-did-to-debug"},"children":[{"type":"text","value":"things I did to debug"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["inline-verbatim"]},"children":[{"type":"text","value":"M-x debug-on-entry enable-theme"}]},{"type":"text","value":", then step through the frames until the truly inexplicable moment happened where server-mode was being set to t.\n"}]}]},"filetags":":elisp:emacs:debug:","backlinks":[{"path":"/20240822193504-emacs","title":"Emacs"}]},"__N_SSG":true}