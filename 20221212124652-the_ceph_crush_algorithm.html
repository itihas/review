<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>The Ceph CRUSH algorithm</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/c5198630dc662cd9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c5198630dc662cd9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-a85322f027b40e20.js" defer=""></script><script src="/_next/static/chunks/main-00e108e884e8ba17.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5e7e1e817aab6e29.js" defer=""></script><script src="/_next/static/chunks/929-fd697a5772151b77.js" defer=""></script><script src="/_next/static/chunks/329-4859dea2fee324e7.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...slug%5D%5D-36a5cddfb88d7ae3.js" defer=""></script><script src="/_next/static/ic2Hv85zWOGZC6H3QKmQA/_buildManifest.js" defer=""></script><script src="/_next/static/ic2Hv85zWOGZC6H3QKmQA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main><h1>The Ceph CRUSH algorithm</h1><p>Allocation algorithm. given an input value, CRUSH deterministically outputs an ordered list of distinct storage targets.
</p><p>Create a cluster map, which is a tree where the leaves are storage devices; call the internal nodes buckets.
</p><p>Buckets have associated weights and are of four different types:
</p><ul><li><p>uniform (children are identical; constant-time allocation)
</p></li><li><p>list (children are arbitrary weights; we step through it until the current node is heavier than the sum of the remaining)
</p></li><li><p>tree (children have arbitrary weights)
</p></li><li><p>straw (children are assigned numbers which are multiplied by weights, and the &quot;longest straw&quot; is chosen)
</p></li></ul><p>This plus implementation of allocation rules, which act as filters.
</p><section><h2>Backlinks</h2><ul><li><a href="/all_pages">All Pages</a></li></ul></section></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"The Ceph CRUSH algorithm","hast":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Allocation algorithm. given an input value, CRUSH deterministically outputs an ordered list of distinct storage targets.\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create a cluster map, which is a tree where the leaves are storage devices; call the internal nodes buckets.\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Buckets have associated weights and are of four different types:\n"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"uniform (children are identical; constant-time allocation)\n"}]}]},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"list (children are arbitrary weights; we step through it until the current node is heavier than the sum of the remaining)\n"}]}]},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"tree (children have arbitrary weights)\n"}]}]},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"straw (children are assigned numbers which are multiplied by weights, and the \"longest straw\" is chosen)\n"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This plus implementation of allocation rules, which act as filters.\n"}]}]},"filetags":{},"backlinks":[{"path":"/all_pages","title":"All Pages"}]},"__N_SSG":true},"page":"/[[...slug]]","query":{"slug":["20221212124652-the_ceph_crush_algorithm"]},"buildId":"ic2Hv85zWOGZC6H3QKmQA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>